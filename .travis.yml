sudo: required
services:
  - docker

before_install:
  - docker build -t shavitnetzer/docker-react .

script:
  - docker-compose up --build -d
  - bash test-script.sh $PASS
  - docker-compose down

after_success:
  - echo "${DOCKER_PASSWORD}" | docker login -u "${DOCKER_USERNAME}" --password-stdin
  - docker push ${DOCKER_USERNAME}/docker-react:${TRAVIS_BUILD_NUMBER}
#  provider: script
#  script: 
#   - echo "${DOCKER_PASSWORD}" | docker login -u "${DOCKER_USERNAME}" --password-stdin
#   - docker push shavitnetzer/docker-react:001
#  on:
#    branch: master
